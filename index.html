<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Mi App Offline</title>
  <link rel="stylesheet" href="main.css" />
</head>
<body>
  <h1>Mi Aplicaci√≥n</h1>
  <p>Contenido de la aplicaci√≥n...</p>

  <!-- ‚öôÔ∏è Script de conexi√≥n -->
  <script>
    // Mostrar pantalla completa si no hay conexi√≥n
    function mostrarPantallaSinConexion() {
      if (document.getElementById('offlineOverlay')) return;

      const overlay = document.createElement('div');
      overlay.id = 'offlineOverlay';
      overlay.innerHTML = `
        <div class="offline-content">
          <h2>üö´ Sin conexi√≥n a Internet</h2>
          <p>No se pudieron cargar datos frescos.</p>
          <p>Verifica tu conexi√≥n y vuelve a intentarlo.</p>
        </div>
      `;

      // Estilos incrustados para que funcionen incluso sin CSS externo
      overlay.style.cssText = `
        position: fixed;
        inset: 0;
        background: linear-gradient(160deg, #1f2937, #111827);
        color: white;
        display: flex;
        align-items: center;
        justify-content: center;
        flex-direction: column;
        text-align: center;
        font-family: system-ui, sans-serif;
        z-index: 99999;
      `;

      const content = overlay.querySelector('.offline-content');
      content.style.cssText = `
        background: rgba(255,255,255,0.1);
        padding: 30px 40px;
        border-radius: 16px;
        box-shadow: 0 8px 24px rgba(0,0,0,0.5);
      `;

      overlay.querySelector('h2').style.cssText = `
        font-size: 24px;
        margin-bottom: 8px;
      `;

      overlay.querySelectorAll('p').forEach(p => {
        p.style.margin = '6px 0';
      });

      document.body.appendChild(overlay);
    }

    // Eliminar pantalla de sin conexi√≥n
    function eliminarPantallaSinConexion() {
      const overlay = document.getElementById('offlineOverlay');
      if (overlay) overlay.remove();
    }

    // Mostrar banner de reconexi√≥n
    function mostrarAvisoReconectado() {
      if (document.getElementById('onlineBanner')) return;
      const banner = document.createElement('div');
      banner.id = 'onlineBanner';
      banner.textContent = '‚úÖ Conectado: datos actualizados correctamente.';
      banner.style.cssText = `
        position: fixed;
        left: 50%;
        transform: translateX(-50%);
        bottom: 20px;
        background: #10b981;
        color: white;
        padding: 12px 20px;
        border-radius: 12px;
        font-weight: 600;
        font-family: system-ui, sans-serif;
        box-shadow: 0 6px 18px rgba(0,0,0,0.3);
        z-index: 100000;
        opacity: 0;
        transition: opacity 0.4s ease;
      `;
      document.body.appendChild(banner);

      // Animaci√≥n
      setTimeout(() => (banner.style.opacity = '1'), 100);
      setTimeout(() => {
        banner.style.opacity = '0';
        setTimeout(() => banner.remove(), 500);
      }, 4000);
    }

    // Detectar cambios de conexi√≥n
    window.addEventListener('load', () => {
      if (!navigator.onLine) {
        mostrarPantallaSinConexion();
      }
    });

    window.addEventListener('offline', () => {
      mostrarPantallaSinConexion();
    });

    window.addEventListener('online', () => {
      eliminarPantallaSinConexion();
      mostrarAvisoReconectado();
    });
  </script>
</body>
</html>
